
-- Tabla de Persona.

CREATE TABLE PERSONA 
(	
	IDPERSONA  NUMBER, 
	NOMBRE     VARCHAR2(50), 
	APELLIDOS  VARCHAR2(50), 
	EMAIL      VARCHAR2(50), 
	TELEFONO   VARCHAR2(50)
);

COMMENT ON COLUMN PERSONA.IDPERSONA IS 'ID de la persona.';
COMMENT ON COLUMN PERSONA.NOMBRE IS 'Nombre de la persona.';
COMMENT ON COLUMN PERSONA.APELLIDOS IS 'Apellidos de la persona.';
COMMENT ON COLUMN PERSONA.EMAIL IS 'Email de la persona.';
COMMENT ON COLUMN PERSONA.TELEFONO IS 'Tel�fono de la persona.';
COMMENT ON TABLE PERSONA IS 'Tabla de Personas.';

CREATE PUBLIC SYNONYM PERSONA FOR CURSO_JAVA.PERSONA;

CREATE UNIQUE INDEX I_IDPERSONA ON PERSONA(IDPERSONA);

ALTER TABLE PERSONA ADD (CONSTRAINT pk_PERSONA PRIMARY KEY (IDPERSONA));

CREATE SEQUENCE PERSONA_SEQ  MINVALUE 1 MAXVALUE 999999999 INCREMENT BY 1 START WITH 1 CACHE 20 ORDER  NOCYCLE;

CREATE OR REPLACE TRIGGER TR_PERSONA_IDPERSONA 
BEFORE INSERT ON persona
FOR EACH ROW
BEGIN

  :NEW.idpersona := persona_seq.NEXTVAL;

END tr_persona_idpersona;
/

BEGIN
    
	Insert into PERSONA (NOMBRE,APELLIDOS,EMAIL,TELEFONO) values ('Alfonso', 'López Jiménez', 'alfonso_lopezjimenez@hotmail.com', '666207804');
	Insert into PERSONA (NOMBRE,APELLIDOS,EMAIL,TELEFONO) values ('Isabel', 'Ferral Cabrera', 'isafc1986@gmail.com', '648232289');
	Insert into PERSONA (NOMBRE,APELLIDOS,EMAIL,TELEFONO) values ('Álex', 'López Ferral', 'alexlf@gmail.com', null);
	
	COMMIT;

END;

SELECT * FROM PERSONA;
